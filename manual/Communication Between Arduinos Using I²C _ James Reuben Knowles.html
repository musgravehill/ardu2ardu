<!DOCTYPE html>
<!-- saved from url=(0046)http://jamesreubenknowles.com/arduino-i2c-1680 -->
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>Communication Between Arduinos Using I²C | James Reuben Knowles</title>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="stylesheet" type="text/css" media="all" href="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/style.css">
<link rel="pingback" href="http://jamesreubenknowles.com/xmlrpc.php">
<link rel="alternate" type="application/rss+xml" title="James Reuben Knowles » Feed" href="http://jamesreubenknowles.com/feed">
<link rel="alternate" type="application/rss+xml" title="James Reuben Knowles » Comments Feed" href="http://jamesreubenknowles.com/comments/feed">
<link rel="alternate" type="application/rss+xml" title="James Reuben Knowles » Communication Between Arduinos Using I²C Comments Feed" href="http://jamesreubenknowles.com/arduino-i2c-1680/feed">
		<script id="facebook-jssdk" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/sdk.js"></script><script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/jamesreubenknowles.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.3.1"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/wp-emoji-release.min.js" type="text/javascript"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="cptch_stylesheet-css" href="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/style(1).css" type="text/css" media="all">
<link rel="stylesheet" id="cntctfrm_form_style-css" href="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/form_style.css" type="text/css" media="all">
<link rel="stylesheet" id="genericons-css" href="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/genericons.css" type="text/css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/jetpack.css" type="text/css" media="all">
<script type="text/javascript" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/jquery.js"></script>
<script type="text/javascript" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/jquery-migrate.min.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://jamesreubenknowles.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://jamesreubenknowles.com/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Integrating GitHub Pull Requests with TeamCity" href="http://jamesreubenknowles.com/integrating-github-pull-requests-with-teamcity-1678">
<link rel="next" title="Effects of Varying I²C Pull-Up Resistors" href="http://jamesreubenknowles.com/effects-of-varying-i%c2%b2c-pull-up-resistors-1710">
<meta name="generator" content="WordPress 4.3.1">
<link rel="canonical" href="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/Communication Between Arduinos Using I²C _ James Reuben Knowles.html">
<link rel="shortlink" href="http://wp.me/pliaC-r6">

<link rel="dns-prefetch" href="http://jetpack.wordpress.com/">
<link rel="dns-prefetch" href="http://s0.wp.com/">
<link rel="dns-prefetch" href="http://s1.wp.com/">
<link rel="dns-prefetch" href="http://s2.wp.com/">
<link rel="dns-prefetch" href="http://public-api.wordpress.com/">
<link rel="dns-prefetch" href="http://0.gravatar.com/">
<link rel="dns-prefetch" href="http://1.gravatar.com/">
<link rel="dns-prefetch" href="http://2.gravatar.com/">
<link rel="dns-prefetch" href="http://i0.wp.com/">
<link rel="dns-prefetch" href="http://i1.wp.com/">
<link rel="dns-prefetch" href="http://i2.wp.com/">
<link rel="dns-prefetch" href="http://widgets.wp.com/">

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="Communication Between Arduinos Using I²C">
<meta property="og:url" content="http://jamesreubenknowles.com/arduino-i2c-1680">
<meta property="og:description" content="How to use I²C for communication between two Arduinos.
Share this:PrintMoreEmailLike this:Like Loading...">
<meta property="article:published_time" content="2013-02-15T04:23:42+00:00">
<meta property="article:modified_time" content="2013-02-16T20:09:03+00:00">
<meta property="og:site_name" content="James Reuben Knowles">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:locale" content="en_US">
<meta name="twitter:card" content="summary">
<link rel="stylesheet" type="text/css" href="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/shCore.css"><link rel="stylesheet" type="text/css" href="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/shThemeDefault.css"><style type="text/css" id="syntaxhighlighteranchor"></style>
<style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow-x:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f8;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3a5795;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #2f477a;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f8;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style><script src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/secureAnonymousFramework"></script><style type="text/css">* html #li_ui_li_gen_1447405779056_0 a#li_ui_li_gen_1447405779056_0-link{height:1% !important;}#li_ui_li_gen_1447405779056_0{position:relative !important;overflow:visible !important;display:block !important;}#li_ui_li_gen_1447405779056_0 span{-webkit-box-sizing:content-box !important;-moz-box-sizing:content-box !important;box-sizing:content-box !important;}#li_ui_li_gen_1447405779056_0 a#li_ui_li_gen_1447405779056_0-link{border:0 !important;height:20px !important;text-decoration:none !important;padding:0 !important;margin:0 !important;display:inline-block !important;}#li_ui_li_gen_1447405779056_0 a#li_ui_li_gen_1447405779056_0-link:link, #li_ui_li_gen_1447405779056_0 a#li_ui_li_gen_1447405779056_0-link:visited, #li_ui_li_gen_1447405779056_0 a#li_ui_li_gen_1447405779056_0-link:hover, #li_ui_li_gen_1447405779056_0 a#li_ui_li_gen_1447405779056_0-link:active{border:0 !important;text-decoration:none !important;}#li_ui_li_gen_1447405779056_0 a#li_ui_li_gen_1447405779056_0-link:after{content:"." !important;display:block !important;clear:both !important;visibility:hidden !important;line-height:0 !important;height:0 !important;}#li_ui_li_gen_1447405779056_0 #li_ui_li_gen_1447405779056_0-logo{background-image:url(https://static.licdn.com/scds/common/u/images/apps/connect/sprites/sprite_connect_v14.png) !important;background-position:0px -593px !important;background-repeat:no-repeat !important;background-color:#0077b5 !important;background-size:initial !important;cursor:pointer !important;border:0 !important;border-right:1px solid #066094 !important;text-indent:-9999em !important;overflow:hidden !important;padding:0 !important;margin:0 !important;position:absolute !important;left:0px !important;top:0px !important;display:block !important;width:20px !important;height:20px !important;float:right !important;border-radius:2px !important;-webkit-border-radius:2px !important;border-top-right-radius:2px !important;border-bottom-right-radius:2px !important;-webkit-border-top-right-radius:2px !important;-webkit-border-bottom-right-radius:2px !important;}#li_ui_li_gen_1447405779056_0 #li_ui_li_gen_1447405779056_0-title{color:#fff !important;cursor:pointer !important;display:block !important;white-space:nowrap !important;float:left !important;margin-left:1px !important;vertical-align:top !important;overflow:hidden !important;text-align:center !important;height:18px !important;padding:0 4px 0 23px !important;border:1px solid #000 !important;border-top-color:#0077b5 !important;border-right-color:#0077b5 !important;border-bottom-color:#0077b5 !important;border-left-color:#0077b5 !important;text-shadow:0 -1px #005887 !important;line-height:20px !important;border-radius:2px !important;-webkit-border-radius:2px !important;border-top-right-radius:2px !important;border-bottom-right-radius:2px !important;-webkit-border-top-right-radius:2px !important;-webkit-border-bottom-right-radius:2px !important;background-color:#0077b5 !important;background-image:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#0077b5), color-stop(100%,#0077b5)) !important; background-image: -webkit-linear-gradient(top, #0077b5 0%, #0077b5 100%) !important;}#li_ui_li_gen_1447405779056_0.hovered #li_ui_li_gen_1447405779056_0-title{border:1px solid #000 !important;border-top-color:#0369a0 !important;border-right-color:#0369a0 !important;border-bottom-color:#0369a0 !important;border-left-color:#0369a0 !important;background-color:#0369a0 !important;background-image:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#0369a0), color-stop(100%,#0369a0)) !important; background-image: -webkit-linear-gradient(top, #0369a0 0%, #0369a0 100%) !important;}#li_ui_li_gen_1447405779056_0.clicked #li_ui_li_gen_1447405779056_0-title, #li_ui_li_gen_1447405779056_0.down #li_ui_li_gen_1447405779056_0-title{color:#fff !important;border:1px solid #000 !important;border-top-color:#066094 !important;border-right-color:#066094 !important;border-bottom-color:#066094 !important;border-left-color:#066094 !important;background-color:#066094 !important;background-image:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#066094), color-stop(100%,#066094)) !important; background-image: -webkit-linear-gradient(top, #066094 0%, #066094 100%) !important;}.IN-shadowed #li_ui_li_gen_1447405779056_0 #li_ui_li_gen_1447405779056_0-title{}.IN-shadowed #li_ui_li_gen_1447405779056_0.hovered #li_ui_li_gen_1447405779056_0-title{}.IN-shadowed #li_ui_li_gen_1447405779056_0.clicked #li_ui_li_gen_1447405779056_0-title, .IN-shadowed #li_ui_li_gen_1447405779056_0.down #li_ui_li_gen_1447405779056_0-title{}#li_ui_li_gen_1447405779056_0 #li_ui_li_gen_1447405779056_0-title-text, #li_ui_li_gen_1447405779056_0 #li_ui_li_gen_1447405779056_0-title-text *{color:#fff !important;font-size:11px !important;font-family:Arial, sans-serif !important;font-weight:bold !important;font-style:normal !important;-webkit-font-smoothing:antialiased !important;display:inline-block !important;background:transparent none !important;vertical-align:top !important;height:18px !important;line-height:20px !important;float:none !important;}#li_ui_li_gen_1447405779056_0 #li_ui_li_gen_1447405779056_0-title-text strong{font-weight:bold !important;}#li_ui_li_gen_1447405779056_0 #li_ui_li_gen_1447405779056_0-title-text em{font-style:italic !important;}#li_ui_li_gen_1447405779056_0.hovered #li_ui_li_gen_1447405779056_0-title-text, #li_ui_li_gen_1447405779056_0.hovered #li_ui_li_gen_1447405779056_0-title-text *{color:#fff !important;}#li_ui_li_gen_1447405779056_0.clicked #li_ui_li_gen_1447405779056_0-title-text, #li_ui_li_gen_1447405779056_0.down #li_ui_li_gen_1447405779056_0-title-text, #li_ui_li_gen_1447405779056_0.clicked #li_ui_li_gen_1447405779056_0-title-text *, #li_ui_li_gen_1447405779056_0.down #li_ui_li_gen_1447405779056_0-title-text *{color:#fff !important;}#li_ui_li_gen_1447405779056_0 #li_ui_li_gen_1447405779056_0-title #li_ui_li_gen_1447405779056_0-mark{display:inline-block !important;width:0px !important;overflow:hidden !important;}.success #li_ui_li_gen_1447405779056_0 #li_ui_li_gen_1447405779056_0-title{color:#fff !important;border-top-color:#0077b5 !important;border-right-color:#0077b5 !important;border-bottom-color:#0077b5 !important;border-left-color:#0077b5 !important;background-color:#0077b5 !important;background-image:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#0077b5), color-stop(100%,#0077b5)) !important; background-image: -webkit-linear-gradient(top, #0077b5 0%, #0077b5 100%) !important;}.success #li_ui_li_gen_1447405779056_0 #li_ui_li_gen_1447405779056_0-title-text, .success #li_ui_li_gen_1447405779056_0 #li_ui_li_gen_1447405779056_0-title-text *{color:#fff !important;}.IN-shadowed .success #li_ui_li_gen_1447405779056_0 #li_ui_li_gen_1447405779056_0-title{}.success #li_ui_li_gen_1447405779056_0.hovered #li_ui_li_gen_1447405779056_0-title{color:#fff !important;border-top-color:#0369a0 !important;border-right-color:#0369a0 !important;border-bottom-color:#0369a0 !important;border-left-color:#0369a0 !important;background-color:#0369a0 !important;background-image:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#0369a0), color-stop(100%,#0369a0)) !important; background-image: -webkit-linear-gradient(top, #0369a0 0%, #0369a0 100%) !important;}.success #li_ui_li_gen_1447405779056_0.hovered #li_ui_li_gen_1447405779056_0-title-text, .success #li_ui_li_gen_1447405779056_0.hovered #li_ui_li_gen_1447405779056_0-title-text *{color:#fff !important;}.success #li_ui_li_gen_1447405779056_0.clicked #li_ui_li_gen_1447405779056_0-title, .success #li_ui_li_gen_1447405779056_0.down #li_ui_li_gen_1447405779056_0-title{color:#fff !important;border-top-color:#066094 !important;border-right-color:#066094 !important;border-bottom-color:#066094 !important;border-left-color:#066094 !important;background-color:#066094 !important;background-image:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#066094), color-stop(100%,#066094)) !important; background-image: -webkit-linear-gradient(top, #066094 0%, #066094 100%) !important;}.success #li_ui_li_gen_1447405779056_0.clicked #li_ui_li_gen_1447405779056_0-title-text, .success #li_ui_li_gen_1447405779056_0.down #li_ui_li_gen_1447405779056_0-title-text, .success #li_ui_li_gen_1447405779056_0.clicked #li_ui_li_gen_1447405779056_0-title-text *, .success #li_ui_li_gen_1447405779056_0.down #li_ui_li_gen_1447405779056_0-title-text *{color:#fff !important;}.IN-shadowed .success #li_ui_li_gen_1447405779056_0.clicked #li_ui_li_gen_1447405779056_0-title, .IN-shadowed .success #li_ui_li_gen_1447405779056_0.down #li_ui_li_gen_1447405779056_0-title{}#li_ui_li_gen_1447405779094_1-container.IN-right {display:inline-block !important;float:left !important;overflow:visible !important;position:relative !important;height:20px !important;padding-left:2px !important;line-height:1px !important;cursor:pointer !important;}#li_ui_li_gen_1447405779094_1.IN-right {display:block !important;float:left !important;height:20px !important;margin-right:4px !important;padding-right:4px !important;background-image:url(https://static.licdn.com/scds/common/u/images/apps/connect/sprites/sprite_connect_v14.png) !important;background-color:transparent !important;background-repeat:no-repeat !important;background-position:right -447px !important;}#li_ui_li_gen_1447405779094_1-inner.IN-right {display:block !important;float:left !important;padding-left:8px !important;text-align:center !important;background-image:url(https://static.licdn.com/scds/common/u/images/apps/connect/sprites/sprite_connect_v14.png) !important;background-color:transparent !important;background-repeat:no-repeat !important;background-position:0px -426px !important;}#li_ui_li_gen_1447405779094_1-content.IN-right {display:inline !important;font-size:11px !important;color:#4e4e4e !important;font-weight:bold !important;font-family:Arial, sans-serif !important;line-height:20px !important;padding:0 5px 0 5px !important;}#li_ui_li_gen_1447405779094_1-container.IN-empty {display:none !important;}#li_ui_li_gen_1447405779094_1-container.IN-hidden #li_ui_li_gen_1447405779094_1 {display:none !important;}</style></head>

<body class="single single-post postid-1680 single-format-standard">
<div id="wrapper" class="hfeed">
	<div id="header">
		<div id="masthead">
			<div id="branding" role="banner">
								<div id="site-title">
					<span>
						<a href="http://jamesreubenknowles.com/" title="James Reuben Knowles" rel="home">James Reuben Knowles</a>
					</span>
				</div>
				<div id="site-description">Random notes and musings</div>

										<img src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/sunset.jpg" width="940" height="198" alt="">
								</div><!-- #branding -->

			<div id="access" role="navigation">
			  				<div class="skip-link screen-reader-text"><a href="http://jamesreubenknowles.com/arduino-i2c-1680#content" title="Skip to content">Skip to content</a></div>
								<div class="menu-header"><ul id="menu-top-menu" class="menu"><li id="menu-item-1450" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1450"><a href="http://jamesreubenknowles.com/about">About</a></li>
<li id="menu-item-1447" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1447"><a href="http://jamesreubenknowles.com/hire-me">Hire Me</a></li>
<li id="menu-item-1449" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1449"><a href="http://jamesreubenknowles.com/contact">Contact</a></li>
<li id="menu-item-1448" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1448"><a href="http://jamesreubenknowles.com/attributions">Attributions</a></li>
</ul></div>			</div><!-- #access -->
		</div><!-- #masthead -->
	</div><!-- #header -->

	<div id="main">

		<div id="container">
			<div id="content" role="main">

			

				<div id="nav-above" class="navigation">
					<div class="nav-previous"><a href="http://jamesreubenknowles.com/integrating-github-pull-requests-with-teamcity-1678" rel="prev"><span class="meta-nav">←</span> Integrating GitHub Pull Requests with TeamCity</a></div>
					<div class="nav-next"><a href="http://jamesreubenknowles.com/effects-of-varying-i%c2%b2c-pull-up-resistors-1710" rel="next">Effects of Varying I²C Pull-Up Resistors <span class="meta-nav">→</span></a></div>
				</div><!-- #nav-above -->

				<div id="post-1680" class="post-1680 post type-post status-publish format-standard hentry category-micro tag-arduino tag-communication tag-howto tag-i2c tag-ic tag-master tag-slave tag-wire tag-wire-library">
					<h1 class="entry-title">Communication Between Arduinos Using I²C</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted on</span> <a href="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/Communication Between Arduinos Using I²C _ James Reuben Knowles.html" title="9:23 pm" rel="bookmark"><span class="entry-date">14 February 2013</span></a> <span class="meta-sep">by</span> <span class="author vcard"><a class="url fn n" href="http://jamesreubenknowles.com/author/blackpuma" title="View all posts by James Reuben Knowles">James Reuben Knowles</a></span>					</div><!-- .entry-meta -->

					<div class="entry-content">
						<p>There are many great resources for describing what I²C is, and how to read data from an I²C device with the Arduino. However, I couldn’t find any suitable page for how to use I²C for communication between two Arduinos. This is for version 1.0.3.</p>
<h2>Hardware</h2>
<p>The hardware setup is the same as any other I²C setup. Connect each Arduino’s A4 inputs to each other, and connect the A5 inputs together. They will need a pull-up resistor, however the Wire library enables the internal pull-up resistors when <a href="http://arduino.cc/en/Reference/WireBegin" target="_blank"><tt>begin()</tt></a> is called.</p>
<p>This may be adequate for your uses, but as is discussed in&nbsp;<a href="http://www.dsscircuits.com/articles/effects-of-varying-i2c-pull-up-resistors.html" target="_blank">Effects of Varying I²C Pull-Up Resistors</a>, it’s a case of <a href="http://catb.org/jargon/html/Y/Your-mileage-may-vary.html" target="_blank">YMMV</a>. If internal pull-up resistors do cause a problem, then you’ll have to comment out the following lines from the <tt>Wire/utility/twi.c</tt> soruce file.</p>
<div><div id="highlighter_846546" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number75 index0 alt2">75</div><div class="line number76 index1 alt1">76</div><div class="line number77 index2 alt2">77</div></td><td class="code"><div class="container"><div class="line number75 index0 alt2"><code class="cpp comments">// activate internal pullups for twi.</code></div><div class="line number76 index1 alt1"><code class="cpp plain">digitalWrite(SDA, 1);</code></div><div class="line number77 index2 alt2"><code class="cpp plain">digitalWrite(SCL, 1);</code></div></div></td></tr></tbody></table></div></div>
<h2>Software Overview</h2>
<p>The structure of the master code and the slave code are very different, but neither is complicated. Because I²C does not define a data protocol, you’ll have to roll your own. It’s common to use a model where devices are manipulated through writing to registers, and reading values back.</p>
<h2>The Master</h2>
<p>The master’s code is synchronous, and wraps its communication between <a href="http://arduino.cc/en/Reference/WireBeginTransmission" target="_blank"><tt>beginTransmission()</tt></a> and <a href="http://arduino.cc/en/Reference/WireEndTransmission" target="_blank"><tt>endTransmission()</tt></a> calls. It sends with the <a href="http://arduino.cc/en/Reference/WireWrite" target="_blank"><tt>write()</tt></a> methods, and receives with the <tt>requestFrom()</tt> method.</p>
<h3>Setup</h3>
<p>Setup requires only one command, <a href="http://arduino.cc/en/Reference/WireBegin" target="_blank"><tt>begin()</tt></a>.</p>
<div><div id="highlighter_316555" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">setup()</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Start I²C bus as master</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.begin();</code></div><div class="line number5 index4 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<h3>Sending Data to a Slave</h3>
<p>Sending data to a slave is done either by individual bytes, or in bulk. Here is a somewhat contrived example that sends the value of an analogue input pin to a slave every second. It writes bytes one at a time rather than using a buffer.</p>
<div><div id="highlighter_513633" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">loop()</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">input = analogRead(AnalogueInputPin);</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Send two bytes to slave.</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.beginTransmission(SlaveDeviceId);</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.write(input &gt;&gt; 8);</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.write(input &amp; 255);</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.endTransmission();</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">delay(1000);</code></div><div class="line number12 index11 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<h3>Receiving Data from a Slave</h3>
<p>Receiving data from a slave is done either by individual bytes, or in bulk. Here is another contrived example that receives the value in the prior section.</p>
<div><div id="highlighter_765646" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">loop()</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Request data from slave.</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.beginTransmission(SlaveDeviceId);</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">available = Wire.requestFrom(SlaveDeviceId, (uint8_t)2);</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(available == 2)</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">receivedValue = Wire.read() &lt;&lt; 8 | Wire.read();</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Serial.println(receivedValue);</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">else</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Serial.print(</code><code class="cpp string">"Unexpected number of bytes received: "</code><code class="cpp plain">);</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Serial.println(available);</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.endTransmission();</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">delay(1000);</code></div><div class="line number21 index20 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<h2>The Slave</h2>
<p>The slave controller uses asynchronous callback functions for its communication. Slave mode is strictly reactionary — it receives or sends data <em>only</em> at the best of the master. The callbacks are set in the <tt>setup()</tt> function, the <tt>loop()</tt> function is empty, and everything happens in the callbacks.</p>
<h3>Setup</h3>
<p>Setup requires two commands. The first is to call <a href="http://arduino.cc/en/Reference/WireBegin" target="_blank"><tt>begin()</tt></a> with the slave’s ID number.</p>
<div><div id="highlighter_635164" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">const</code> <code class="cpp plain">byte SlaveDeviceId = 1;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">setup()</code></div><div class="line number4 index3 alt1"><code class="cpp plain">{</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Start I²C bus as a slave</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.begin(SlaveDeviceId);</code></div><div class="line number7 index6 alt2"><code class="cpp plain">...</code></div></div></td></tr></tbody></table></div></div>
<p>The second is to set up the callbacks. Details are below.</p>
<h3>Receiving Data from the Master</h3>
<p>Data coming in to the slave from the master is handled in a single callback of the form</p>
<div><div id="highlighter_187880" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">callbackName(</code><code class="cpp color1 bold">int</code> <code class="cpp plain">numberOfBytesBeingTransmitted)</code></div></div></td></tr></tbody></table></div></div>
<p>This is registered in the <tt>setup()</tt> function by calling the <a href="http://arduino.cc/en/Reference/WireOnReceive" target="_blank"><tt>onReceive()</tt></a> method.</p>
<div><div id="highlighter_402532" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="cpp keyword bold">const</code> <code class="cpp plain">byte SlaveDeviceId = 1;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">setup()</code></div><div class="line number6 index5 alt1"><code class="cpp plain">{</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Start I²C bus as a slave</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.begin(SlaveDeviceId);</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Set the callback to call when data is received.</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.onReceive(receiveCallback);</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// For demonstration purposes.</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Serial.begin(9600);</code></div><div class="line number14 index13 alt1"><code class="cpp plain">}</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">loop()</code></div><div class="line number17 index16 alt2"><code class="cpp plain">{</code></div><div class="line number18 index17 alt1"><code class="cpp plain">}</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="cpp comments">// aCount is the number of bytes received.</code></div><div class="line number21 index20 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">receiveCallback(</code><code class="cpp color1 bold">int</code> <code class="cpp plain">aCount)</code></div><div class="line number22 index21 alt1"><code class="cpp plain">{</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(aCount == 2)</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">receivedValue&nbsp; = Wire.read() &lt;&lt; 8;</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">receivedValue |= Wire.read();</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Serial.println(receivedValue);</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">else</code></div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Serial.print(</code><code class="cpp string">"Unexpected number of bytes received: "</code><code class="cpp plain">);</code></div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Serial.println(aCount);</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number34 index33 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<h3>Sending Data to the Master</h3>
<p>Sending data to the master is also done asynchronously using a callback. When a request for data is received from a master, a callback is invoked. The callback must compose its reply in a buffer, then send the buffer all at once with a single call to <a href="http://arduino.cc/en/Reference/WireWrite" target="_blank"><tt>write()</tt></a>. Note that <em>the Write class performs no buffering for outgoing transmissions</em>; any call to <tt>write()</tt> transmits the entire reply <strong>immediately</strong>.</p>
<p>Data coming in to the slave from the master is handled in a single callback of the form</p>
<div><div id="highlighter_610899" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">callbackName()</code></div></div></td></tr></tbody></table></div></div>
<p>This is registered in the <tt>setup()</tt> function by calling the <a href="http://arduino.cc/en/Reference/WireOnRequest" target="_blank"><tt>onRequest()</tt></a> method.</p>
<div><div id="highlighter_378471" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="cpp keyword bold">const</code> <code class="cpp plain">byte AnalogueInputPin = 0;</code></div><div class="line number4 index3 alt1"><code class="cpp keyword bold">const</code> <code class="cpp plain">byte SlaveDeviceId = 1;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">setup()</code></div><div class="line number7 index6 alt2"><code class="cpp plain">{</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Start I²C bus as a slave</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.begin(SlaveDeviceId);</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Set the callback to call when data is requested.</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.onRequest(requestCallback);</code></div><div class="line number12 index11 alt1"><code class="cpp plain">}</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">loop()</code></div><div class="line number15 index14 alt2"><code class="cpp plain">{</code></div><div class="line number16 index15 alt1"><code class="cpp plain">}</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">requestCallback()</code></div><div class="line number19 index18 alt2"><code class="cpp plain">{</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Contrived example - transmit a value from an analogue pin.</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">input = analogRead(AnalogueInputPin);</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// To send multiple bytes from the slave,</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// you have to fill your own buffer and send it all at once.</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t buffer[2];</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">buffer[0] = input &gt;&gt; 8;</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">buffer[1] = input &amp; 0xff;</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.write(buffer, 2);</code></div><div class="line number29 index28 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<h3>Sending and Receiving on the Same Slave</h3>
<p>A single slave can both send and receive data by registering two callbacks. The appropriate callback is invoked automatically.</p>
<div><div id="highlighter_869398" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">setup()</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.begin(SlaveDeviceId);</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.onReceive(receiveCallback);</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">Wire.onRequest(requestCallback);</code></div><div class="line number6 index5 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<h2>“Gotchas”</h2>
<p>The <a href="http://arduino.cc/en/Reference/Wire" target="_blank">Wire library</a> provides a convenient high-level wrapper for I²C. It has some oddities that will cause trouble if you’re not aware of them. Here are some <a href="http://en.wikipedia.org/wiki/Gotcha_%28programming%29" target="_blank">gotchas</a>.</p>
<h3>Small Buffer</h3>
<p>The <a href="http://arduino.cc/en/Reference/Wire" target="_blank">Wire object</a>‘s internal buffer is fixed at 32 bytes. You cannot send larger packets without modifying the library.</p>
<h3>Asymmetric Behaviour</h3>
<p>The <a href="http://arduino.cc/en/Reference/WireWrite" target="_blank"><tt>write()</tt></a> method’s behaviour is different depending on whether the class is a master or a slave. See the sections on master and slave for details.</p>
<h3>Type Coercion</h3>
<p>The <a href="http://arduino.cc/en/Reference/WireRequestFrom" target="_blank"><tt>requestFrom()</tt></a> method’s overloads may confuse the compiler. If you get compiler errors, try coercing the parameters, for example:</p>
<div><div id="highlighter_111435" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">const</code> <code class="cpp plain">byte SlaveDeviceId = 1;</code></div><div class="line number2 index1 alt1"><code class="cpp plain">...</code></div><div class="line number3 index2 alt2"><code class="cpp comments">// Request data from slave.</code></div><div class="line number4 index3 alt1"><code class="cpp plain">Wire.beginTransmission(SlaveDeviceId);</code></div><div class="line number5 index4 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">bytesReceived = Wire.requestFrom(SlaveDeviceId, (uint8_t)2);</code></div></div></td></tr></tbody></table></div></div>
<h3>No Clock Stretching</h3>
<p>The current version of the library does not support clock stretching.</p>
<h3>Collisions Between Multiple Masters</h3>
<p>I’m still looking into this more, but it appears that there is no mechanism for a master to wait for for a busy bus to clear. The transmission simply fails.</p>
<h2>Code</h2>
<p>I put some some demonstration code on <a href="https://github.com/starforgelabs/arduino-i2c-master-slave" target="_blank">GitHub</a>.</p>
<h2>Updates</h2>
<dl>
<dt>16 Feb 2013</dt>
<dd>Update pull-up resistor information. Update “gotchas” section.</dd>
</dl>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-official sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-print"><a rel="nofollow" data-shared="" class="share-print sd-button" href="http://jamesreubenknowles.com/arduino-i2c-1680#print" target="_blank" title="Click to print"><span>Print</span></a></li><li class="share-twitter"><div class="twitter_button"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="about:blank" style="width:101px; height:20px;"></iframe></div></li><li class="share-facebook"><div class="fb-share-button fb_iframe_widget" data-href="http://jamesreubenknowles.com/arduino-i2c-1680" data-layout="button_count" fb-xfbml-state="rendered" fb-iframe-plugin-query="app_id=249643311490&amp;container_width=0&amp;href=http%3A%2F%2Fjamesreubenknowles.com%2Farduino-i2c-1680&amp;layout=button_count&amp;locale=en_US&amp;sdk=joey"><span style="vertical-align: bottom; width: 84px; height: 20px;"><iframe name="f1b4c1789" width="1000px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:share_button Facebook Social Plugin" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/share_button.html" style="border: none; visibility: visible; width: 84px; height: 20px;" class=""></iframe></span></div></li><li class="share-linkedin"><div class="linkedin_button"><span class="IN-widget" style="line-height: 1; vertical-align: baseline; display: inline-block; text-align: center;"><span style="padding: 0px !important; margin: 0px !important; text-indent: 0px !important; display: inline-block !important; vertical-align: baseline !important; font-size: 1px !important;"><span id="li_ui_li_gen_1447405779056_0"><a id="li_ui_li_gen_1447405779056_0-link" href="javascript:void(0);"><span id="li_ui_li_gen_1447405779056_0-logo">in</span><span id="li_ui_li_gen_1447405779056_0-title"><span id="li_ui_li_gen_1447405779056_0-mark"></span><span id="li_ui_li_gen_1447405779056_0-title-text">Share</span></span></a></span></span><span style="padding: 0px !important; margin: 0px !important; text-indent: 0px !important; display: inline-block !important; vertical-align: baseline !important; font-size: 1px !important;"><span id="li_ui_li_gen_1447405779094_1-container" class="IN-right IN-hidden"><span id="li_ui_li_gen_1447405779094_1" class="IN-right"><span id="li_ui_li_gen_1447405779094_1-inner" class="IN-right"><span id="li_ui_li_gen_1447405779094_1-content" class="IN-right">0</span></span></span></span></span></span><script type="in/share+init" data-url="http://jamesreubenknowles.com/arduino-i2c-1680" data-counter="right"></script></div></li><li><a href="http://jamesreubenknowles.com/arduino-i2c-1680#" class="sharing-anchor sd-button share-more"><span>More</span></a></li><li class="share-end"></li></ul><div class="sharing-hidden"><div class="inner" style="display: none;"><ul><li class="share-email share-service-visible"><a rel="nofollow" data-shared="" class="share-email sd-button" href="http://jamesreubenknowles.com/arduino-i2c-1680?share=email&nb=1" target="_blank" title="Click to email this to a friend"><span>Email</span></a></li><li class="share-reddit"><div class="reddit_button"><iframe src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/button1.html" height="22" width="120" scrolling="no" frameborder="0"></iframe></div></li><li class="share-end"></li><li class="share-end"></li></ul></div></div></div></div></div><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-loaded" id="like-post-wrapper-5074738-1680-5645b81af10e0" data-src="//widgets.wp.com/likes/#blog_id=5074738&amp;post_id=1680&amp;origin=jamesreubenknowles.com&amp;obj_id=5074738-1680-5645b81af10e0" data-name="like-post-frame-5074738-1680-5645b81af10e0"><h3 class="sd-title">Like this:</h3><div class="likes-widget-placeholder post-likes-widget-placeholder" style="height: 55px; display: none;"><span class="button"><span>Like</span></span> <span class="loading">Loading...</span></div><iframe class="post-likes-widget jetpack-likes-widget" name="like-post-frame-5074738-1680-5645b81af10e0" height="55px" width="100%" frameborder="0" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/saved_resource(4).html"></iframe><span class="sd-text-color"></span><a class="sd-link-color"></a></div>											</div><!-- .entry-content -->


					<div class="entry-utility">
						This entry was posted in <a href="http://jamesreubenknowles.com/category/computer/micro" rel="category tag">Micro &amp; Hardware</a> and tagged <a href="http://jamesreubenknowles.com/tag/arduino" rel="tag">arduino</a>, <a href="http://jamesreubenknowles.com/tag/communication" rel="tag">communication</a>, <a href="http://jamesreubenknowles.com/tag/howto" rel="tag">howto</a>, <a href="http://jamesreubenknowles.com/tag/i2c" rel="tag">I2C</a>, <a href="http://jamesreubenknowles.com/tag/i%c2%b2c" rel="tag">I²C</a>, <a href="http://jamesreubenknowles.com/tag/master" rel="tag">master</a>, <a href="http://jamesreubenknowles.com/tag/slave" rel="tag">slave</a>, <a href="http://jamesreubenknowles.com/tag/wire" rel="tag">wire</a>, <a href="http://jamesreubenknowles.com/tag/wire-library" rel="tag">wire library</a>. Bookmark the <a href="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/Communication Between Arduinos Using I²C _ James Reuben Knowles.html" title="Permalink to Communication Between Arduinos Using I²C" rel="bookmark">permalink</a>.											</div><!-- .entry-utility -->
				</div><!-- #post-## -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://jamesreubenknowles.com/integrating-github-pull-requests-with-teamcity-1678" rel="prev"><span class="meta-nav">←</span> Integrating GitHub Pull Requests with TeamCity</a></div>
					<div class="nav-next"><a href="http://jamesreubenknowles.com/effects-of-varying-i%c2%b2c-pull-up-resistors-1710" rel="next">Effects of Varying I²C Pull-Up Resistors <span class="meta-nav">→</span></a></div>
				</div><!-- #nav-below -->

				
			<div id="comments">


			<h3 id="comments-title">9 Responses to <em>Communication Between Arduinos Using I²C</em></h3>


			<ol class="commentlist">
					<li class="comment even thread-even depth-1" id="li-comment-2828">
		<div id="comment-2828">
			<div class="comment-author vcard">
								<cite class="fn">Ben</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://jamesreubenknowles.com/arduino-i2c-1680/comment-page-1#comment-2828">
				25 June 2014 at 9:29 pm</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thanks mate,<br>
I think this is the best explanation of the Wire library I’ve come across. I didn’t know you needed a buffer, when writing multiple bytes from the slave to the master. Now my code is finally working! Cheers, Ben</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3027">
		<div id="comment-3027">
			<div class="comment-author vcard">
								<cite class="fn"><a href="http://www.berryjam.eu/" rel="external nofollow" class="url">Ignas</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://jamesreubenknowles.com/arduino-i2c-1680/comment-page-1#comment-3027">
				17 July 2014 at 1:34 am</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thanks for elegant way sending integers!<br>
Maybe You can add some info how to ask from slave (requestFrom ?) specific value from multiple sensors. Lets say, slave have three sensors (X, Y &amp; Z) and three return functions for each sensor. If slave gets request from master it just have to do one function. It have no info what data it is requested, as no additional info is passed. I think that first master has to transmit some value (command number) to slave. Than slave has to respond accordingly. But how slave transmits to master after master’s request is a little bit tricky part for me.<br>
Thank You.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-3032">
		<div id="comment-3032">
			<div class="comment-author vcard">
								<cite class="fn"><a href="http://www.berryjam.eu/" rel="external nofollow" class="url">Ignas</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://jamesreubenknowles.com/arduino-i2c-1680/comment-page-1#comment-3032">
				17 July 2014 at 5:45 am</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thank You one more time. Sorry for bothering again. I figured it out. Here is my simple Arduino I2C protocol for multiple slave functions <a href="http://www.berryjam.eu/2014/07/advanced-arduino-i2c-communication/" rel="nofollow">http://www.berryjam.eu/2014/07/advanced-arduino-i2c-communication/</a></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-blackpuma bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-3036">
		<div id="comment-3036">
			<div class="comment-author vcard">
								<cite class="fn"><a href="http://jamesreubenknowles.com/" rel="external nofollow" class="url">James Reuben Knowles</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://jamesreubenknowles.com/arduino-i2c-1680/comment-page-1#comment-3036">
				17 July 2014 at 10:49 am</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I’m glad you figured it out, Ignas. Thanks for sharing your solution.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-3101">
		<div id="comment-3101">
			<div class="comment-author vcard">
								<cite class="fn">Arduinoob</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://jamesreubenknowles.com/arduino-i2c-1680/comment-page-1#comment-3101">
				7 October 2014 at 3:32 pm</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Excellent article on I2c and communicating with two arduinos. It clarified several things that I was confused about after watching some youtube vids.</p>
<p>Thanks!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-7599">
		<div id="comment-7599">
			<div class="comment-author vcard">
								<cite class="fn">Mark Eric Schilke</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://jamesreubenknowles.com/arduino-i2c-1680/comment-page-1#comment-7599">
				22 January 2015 at 12:31 pm</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>The programs that Ignas posted on his Berryjam blog did not work quite right for me. Here are my versions: <a href="http://www.meetup.com/Roanoke-Robotics/files/" rel="nofollow">http://www.meetup.com/Roanoke-Robotics/files/</a></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-11399">
		<div id="comment-11399">
			<div class="comment-author vcard">
								<cite class="fn">Octopus</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://jamesreubenknowles.com/arduino-i2c-1680/comment-page-1#comment-11399">
				25 March 2015 at 12:53 am</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Excellent. Thanks for clearing some things up. Also, excellent follow up by Ignas. I was wondering the exact same thing.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-13094">
		<div id="comment-13094">
			<div class="comment-author vcard">
								<cite class="fn">Erick Moya</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://jamesreubenknowles.com/arduino-i2c-1680/comment-page-1#comment-13094">
				6 August 2015 at 10:47 pm</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>James, outstanding tutorial on i2c connectivity between Arduinos. I came across this tutorial while researching techniques for i2c data transmission between Arduinos for my PhD thesis on a 6 degree of freedom balancing mechanism. I’m trained in mechanical engineering, so I’ve had to do some research on control.</p>
<p>On my project, I am using a 6 degree-of-freedom Inertial Measurement Unit (IMU) comprised of a 3 axis accelerometer and a 3 axis gyro sensor to measure roll, pitch and yaw angles of a platform. The library for the IMU returns yaw, pitch and roll angles as signed floats in an array on a dedicated slave Arduino, and then the data is read by the master Arduino that will use this feedback data to control roll, pitch and yaw motors to stabilize a platform dynamically.<br>
Is there a way I can send the entire array containing the roll pitch and yaw angles in one single buffer and then decode the array on the master side using the array’s index?<br>
I’m not sure how to handle the bit shifting to accomplish this.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-blackpuma bypostauthor even thread-even depth-1" id="li-comment-13098">
		<div id="comment-13098">
			<div class="comment-author vcard">
								<cite class="fn"><a href="http://jamesreubenknowles.com/" rel="external nofollow" class="url">James Reuben Knowles</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://jamesreubenknowles.com/arduino-i2c-1680/comment-page-1#comment-13098">
				7 August 2015 at 10:33 am</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Erick, </p>
<p>If you want to transfer the six values without any pre- or post-processing, simply send the array of six floats as-is. The length of the buffer will be:</p>
<p>6*sizeof(float) </p>
<p>The receiving Arduino can copy this array and use it as an ordinary array of floats.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
			</ol>


	

			
		<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://jamesreubenknowles.com/arduino-i2c-1680#respond" style="display:none;">Cancel reply</a></small></h3>
			<div id="commentform" class="comment-form">
				<iframe src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/saved_resource.html" allowtransparency="false" style="width: 100%; height: 58px; border: 0px;" frameborder="0" scrolling="no" name="jetpack_remote_comment" id="jetpack_remote_comment"></iframe>
			</div>
		</div>

		
		<input type="hidden" name="comment_parent" id="comment_parent" value="">

		
</div><!-- #comments -->


			</div><!-- #content -->
		</div><!-- #container -->


		<div id="primary" class="widget-area" role="complementary">
			<ul class="xoxo">

<li id="search-3" class="widget-container widget_search"><form role="search" method="get" id="searchform" class="searchform" action="http://jamesreubenknowles.com/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s">
					<input type="submit" id="searchsubmit" value="Search">
				</div>
			</form></li>		<li id="recent-posts-5" class="widget-container widget_recent_entries">		<h3 class="widget-title">Recent Posts</h3>		<ul>
					<li>
				<a href="http://jamesreubenknowles.com/korad-ka3005p-serial-programming-2261">Korad KA3005P Serial Programming</a>
						</li>
					<li>
				<a href="http://jamesreubenknowles.com/css-specificity-2258">CSS Specificity Overview</a>
						</li>
					<li>
				<a href="http://jamesreubenknowles.com/git-cheat-sheet-2253">Git Cheat Sheet</a>
						</li>
					<li>
				<a href="http://jamesreubenknowles.com/comet-m3-2248">Turning the Spindle On/Off on a Comet CNC</a>
						</li>
					<li>
				<a href="http://jamesreubenknowles.com/git-big-pack-2243">Resolving the git error “pack exceeds maximum allowed size” during push</a>
						</li>
					<li>
				<a href="http://jamesreubenknowles.com/spawning-django-subprocesses-2214">Spawning Django Subprocesses</a>
						</li>
					<li>
				<a href="http://jamesreubenknowles.com/reverting-file-changes-with-git-2206">Reverting File Changes With git</a>
						</li>
					<li>
				<a href="http://jamesreubenknowles.com/re-enabling-key-repeats-in-yosemite-2196">Re-enabling Repeating Keys In Yosemite</a>
						</li>
					<li>
				<a href="http://jamesreubenknowles.com/uaeicc-2187">Updating Array Elements in CoffeeScript Loops</a>
						</li>
					<li>
				<a href="http://jamesreubenknowles.com/maximize-a-window-in-os-x-10-10-yosemite-2183">Maximize a Window in OS X 10.10 (Yosemite)</a>
						</li>
					<li>
				<a href="http://jamesreubenknowles.com/getting-mysql-working-after-ox-10-10-yosemite-upgrade-2179">Getting MySQL Working After OX 10.10 Yosemite Upgrade</a>
						</li>
					<li>
				<a href="http://jamesreubenknowles.com/comet-config-2176">Setting the Probotix Comet Configuration to Find Your G-Code Library</a>
						</li>
				</ul>
		</li><li id="categories-4" class="widget-container widget_categories"><h3 class="widget-title">Categories</h3>		<ul>
	<li class="cat-item cat-item-369"><a href="http://jamesreubenknowles.com/category/arts">Arts</a> (18)
<ul class="children">
	<li class="cat-item cat-item-98"><a href="http://jamesreubenknowles.com/category/arts/music">Music</a> (9)
</li>
	<li class="cat-item cat-item-216"><a href="http://jamesreubenknowles.com/category/arts/photos">Photos</a> (8)
</li>
</ul>
</li>
	<li class="cat-item cat-item-234"><a href="http://jamesreubenknowles.com/category/computer">Computer</a> (147)
<ul class="children">
	<li class="cat-item cat-item-829"><a href="http://jamesreubenknowles.com/category/computer/3d-printing">3D Printing</a> (1)
</li>
	<li class="cat-item cat-item-364"><a href="http://jamesreubenknowles.com/category/computer/cnc-and-robotics" title="Computer controlled machinery.">CNC &amp; Robotics</a> (6)
</li>
	<li class="cat-item cat-item-48"><a href="http://jamesreubenknowles.com/category/computer/mac" title="Articles related to the Apple Mac, OS X, etc. ">Mac</a> (24)
</li>
	<li class="cat-item cat-item-760"><a href="http://jamesreubenknowles.com/category/computer/micro" title="Microcontrollers, electronics, etc. 
">Micro &amp; Hardware</a> (18)
</li>
	<li class="cat-item cat-item-74"><a href="http://jamesreubenknowles.com/category/computer/programming">Programming</a> (54)
</li>
	<li class="cat-item cat-item-23"><a href="http://jamesreubenknowles.com/category/computer/sysadmin">SysAdmin</a> (58)
</li>
</ul>
</li>
	<li class="cat-item cat-item-3"><a href="http://jamesreubenknowles.com/category/dutch-oven">Dutch Oven</a> (21)
<ul class="children">
	<li class="cat-item cat-item-236"><a href="http://jamesreubenknowles.com/category/dutch-oven/recipe-do" title="Recipes specifically for or tested with dutch ovens.
">Recipes</a> (7)
</li>
</ul>
</li>
	<li class="cat-item cat-item-235"><a href="http://jamesreubenknowles.com/category/featured">Featured</a> (4)
</li>
	<li class="cat-item cat-item-516"><a href="http://jamesreubenknowles.com/category/languages">Languages</a> (14)
<ul class="children">
	<li class="cat-item cat-item-517"><a href="http://jamesreubenknowles.com/category/languages/french">French</a> (2)
</li>
	<li class="cat-item cat-item-522"><a href="http://jamesreubenknowles.com/category/languages/greek">Greek</a> (1)
</li>
	<li class="cat-item cat-item-134"><a href="http://jamesreubenknowles.com/category/languages/japanese">Japanese</a> (11)
</li>
</ul>
</li>
	<li class="cat-item cat-item-247"><a href="http://jamesreubenknowles.com/category/misc">Misc.</a> (24)
<ul class="children">
	<li class="cat-item cat-item-365"><a href="http://jamesreubenknowles.com/category/misc/amateur-radio">Amateur Radio</a> (7)
</li>
	<li class="cat-item cat-item-525"><a href="http://jamesreubenknowles.com/category/misc/announcements">Announcements</a> (2)
</li>
	<li class="cat-item cat-item-14"><a href="http://jamesreubenknowles.com/category/misc/extra-mile">Extra Mile</a> (3)
</li>
	<li class="cat-item cat-item-473"><a href="http://jamesreubenknowles.com/category/misc/governance">Governance</a> (2)
</li>
</ul>
</li>
	<li class="cat-item cat-item-1"><a href="http://jamesreubenknowles.com/category/uncategorized">Uncategorized</a> (13)
</li>
	<li class="cat-item cat-item-233"><a href="http://jamesreubenknowles.com/category/video">Video</a> (8)
</li>
	<li class="cat-item cat-item-237"><a href="http://jamesreubenknowles.com/category/arete">Ἀρετή</a> (8)
</li>
	<li class="cat-item cat-item-647"><a href="http://jamesreubenknowles.com/category/nihongo" title="Japanese-language posts. ">日本語</a> (29)
</li>
		</ul>
</li><li id="recent-comments-4" class="widget-container widget_recent_comments"><h3 class="widget-title">Recent Comments</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href="http://nearbycircle.com/godaddy/download-godaddy-root-ca-certificate" rel="external nofollow" class="url">Download Godaddy Root Ca Certificate</a></span> on <a href="http://jamesreubenknowles.com/adding-a-godaddy-ssl-certificate-to-zimbra-7-1360/comment-page-1#comment-13813">Adding a GoDaddy SSL Certificate to Zimbra 7</a></li><li class="recentcomments"><span class="comment-author-link"><a href="http://cybersun.net/godaddy/jsp-godaddy" rel="external nofollow" class="url">Jsp Godaddy – Cyber Sun</a></span> on <a href="http://jamesreubenknowles.com/adding-a-godaddy-ssl-certificate-to-zimbra-7-1360/comment-page-1#comment-13808">Adding a GoDaddy SSL Certificate to Zimbra 7</a></li><li class="recentcomments"><span class="comment-author-link">Nitram</span> on <a href="http://jamesreubenknowles.com/korad-ka3005p-serial-programming-2261/comment-page-1#comment-13800">Korad KA3005P Serial Programming</a></li><li class="recentcomments"><span class="comment-author-link">Tomas</span> on <a href="http://jamesreubenknowles.com/sphinx-django-introduction-1937/comment-page-1#comment-13785">Adding Sphinx Documentation to a Django Project</a></li><li class="recentcomments"><span class="comment-author-link"><a href="http://www.lucadentella.it/2015/09/12/collegare-arduino-a-dispositivi-a-3-3v/" rel="external nofollow" class="url">lucadentella.it – Collegare Arduino a dispositivi a 3.3V</a></span> on <a href="http://jamesreubenknowles.com/level-shifting-stragety-experments-1741/comment-page-1#comment-13539">5V to 3.3V Logic Level Shifting Stragety Notes</a></li></ul></li>			</ul>
		</div><!-- #primary .widget-area -->

	</div><!-- #main -->

	<div id="footer" role="contentinfo">
		<div id="colophon">



			<div id="site-info">
				<a href="http://jamesreubenknowles.com/" title="James Reuben Knowles" rel="home">
					James Reuben Knowles				</a>
			</div><!-- #site-info -->

			<div id="site-generator">
								<a href="https://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress.</a>
			</div><!-- #site-generator -->

		</div><!-- #colophon -->
	</div><!-- #footer -->

</div><!-- #wrapper -->

	<div style="display:none">
	</div>

	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"http:\/\/jamesreubenknowles.com\/arduino-i2c-1680":1680};
	</script>
		<script type="text/javascript">
			var windowOpen;
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-twitter' ).on( 'click', function() {
				if ( 'undefined' !== typeof windowOpen ){ // If there's another sharing window open, close it.
					windowOpen.close();
				}
				windowOpen = window.open( jQuery(this).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
			var windowOpen;
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-facebook' ).on( 'click', function() {
				if ( 'undefined' !== typeof windowOpen ){ // If there's another sharing window open, close it.
					windowOpen.close();
				}
				windowOpen = window.open( jQuery(this).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
		});
		</script>
		<div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="Facebook Cross Domain Communication Frame" aria-hidden="true" tabindex="-1" id="fb_xdm_frame_http" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/wjDNIDNrTQG.html" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="Facebook Cross Domain Communication Frame" aria-hidden="true" tabindex="-1" id="fb_xdm_frame_https" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/wjDNIDNrTQG(1).html" style="border: none;"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="f37d67d4c8" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/ping.html" style="display: none;"></iframe></div></div></div><script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = '//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=249643311490&version=v2.3'; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk'));</script><script type="text/javascript">
			jQuery( document ).ready( function() {
			    jQuery.getScript( '//platform.linkedin.com/in.js?async=true', function success() {
			        IN.init();
			    });
			});
			jQuery( document.body ).on( 'post-load', function() {
				if ( typeof IN != 'undefined' )
					IN.parse();
			});
			</script>	
<script type="text/javascript" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/form.js"></script>
<script type="text/javascript" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/shCore.js"></script>
<script type="text/javascript" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/shBrushCpp.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://jamesreubenknowles.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://jamesreubenknowles.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.defaults['wrap-lines'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/photon.js"></script>
<script type="text/javascript" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/devicepx-jetpack.js"></script>
<script type="text/javascript" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/postmessage.js"></script>
<script type="text/javascript" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/jquery.jetpack-resize.js"></script>
<script type="text/javascript" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/jquery.inview.js"></script>
<script type="text/javascript" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/queuehandler.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/sharing.js"></script>
		<iframe src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/master.html" scrolling="no" id="likes-master" name="likes-master" style="display:none;"></iframe>
		<div id="likes-other-gravatars"><div class="likes-text"><span>%d</span> bloggers like this:</div><ul class="wpl-avatars sd-like-gravatars"></ul></div>
		
		<!--[if IE]>
		<script type="text/javascript">
		if ( 0 === window.location.hash.indexOf( '#comment-' ) ) {
			// window.location.reload() doesn't respect the Hash in IE
			window.location.hash = window.location.hash;
		}
		</script>
		<![endif]-->
		<script type="text/javascript">
			var comm_par_el = document.getElementById( 'comment_parent' ),
			    comm_par = (comm_par_el && comm_par_el.value) ? comm_par_el.value : '',
			    frame = document.getElementById( 'jetpack_remote_comment' ),
			    tellFrameNewParent;

			tellFrameNewParent = function() {
				if ( comm_par ) {
					frame.src = "http://jetpack.wordpress.com/jetpack-comment/?blogid=5074738&postid=1680&comment_registration=0&require_name_email=1&stc_enabled=1&stb_enabled=1&show_avatars=0&avatar_default=mystery&greeting=Leave+a+Reply&greeting_reply=Leave+a+Reply+to+%25s&color_scheme=light&lang=en-US&jetpack_version=3.7.2&sig=ca6bc20d45f98d69a3696012bc554c1049ef18a2#parent=http%3A%2F%2Fjamesreubenknowles.com%2Farduino-i2c-1680" + '&replytocom=' + parseInt( comm_par, 10 ).toString();
				} else {
					frame.src = "http://jetpack.wordpress.com/jetpack-comment/?blogid=5074738&postid=1680&comment_registration=0&require_name_email=1&stc_enabled=1&stb_enabled=1&show_avatars=0&avatar_default=mystery&greeting=Leave+a+Reply&greeting_reply=Leave+a+Reply+to+%25s&color_scheme=light&lang=en-US&jetpack_version=3.7.2&sig=ca6bc20d45f98d69a3696012bc554c1049ef18a2#parent=http%3A%2F%2Fjamesreubenknowles.com%2Farduino-i2c-1680";
				}
			};

	
			if ( window.postMessage ) {
				if ( document.addEventListener ) {
					window.addEventListener( 'message', function( event ) {
						if ( "http:\/\/jetpack.wordpress.com" !== event.origin ) {
							return;
						}

						jQuery( frame ).height( event.data );
					} );
				} else if ( document.attachEvent ) {
					window.attachEvent( 'message', function( event ) {
						if ( "http:\/\/jetpack.wordpress.com" !== event.origin ) {
							return;
						}

						jQuery( frame ).height( event.data );
					} );
				}
			}
		</script>

	<script type="text/javascript" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/e-201546.js" async="" defer=""></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:3.7.2',blog:'5074738',post:'1680',tz:'-7',srv:'jamesreubenknowles.com'} ]);
	_stq.push([ 'clickTrackerInit', '5074738', '1680' ]);
</script>


<div id="sharing_email" style="display: none;">
		<form action="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/Communication Between Arduinos Using I²C _ James Reuben Knowles.html" method="post">
			<label for="target_email">Send to Email Address</label>
			<input type="email" name="target_email" id="target_email" value="">

			
				<label for="source_name">Your Name</label>
				<input type="text" name="source_name" id="source_name" value="">

				<label for="source_email">Your Email Address</label>
				<input type="email" name="source_email" id="source_email" value="">

						<input type="text" id="jetpack-source_f_name" name="source_f_name" class="input" value="" size="25" autocomplete="off">
			<script> document.getElementById('jetpack-source_f_name').value = ''; </script>
			
			<img style="float: right; display: none" class="loading" src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/loading.gif" alt="loading" width="16" height="16">
			<input type="submit" value="Send Email" class="sharing_send">
			<a rel="nofollow" href="http://jamesreubenknowles.com/arduino-i2c-1680#cancel" class="sharing_cancel">Cancel</a>

			<div class="errors errors-1" style="display: none;">
				Post was not sent - check your email addresses!			</div>

			<div class="errors errors-2" style="display: none;">
				Email check failed, please try again			</div>

			<div class="errors errors-3" style="display: none;">
				Sorry, your blog cannot share posts by email.			</div>
		</form>
	</div><img src="./Communication Between Arduinos Using I²C _ James Reuben Knowles_files/g.gif" id="wpstats"></body></html>